<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Kundan Kumar">
<meta name="dcterms.date" content="2025-10-21">
<meta name="description" content="My thoughts on the open source transition in pharma, public (health) sector and academia. A culture change is needed, and it’s done better at some places than others. As educators and researchers, there are many things that can be done.">

<title>Self-Attention Mechanism – Kundan Kumar</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../misc/info/favicon.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-2575636bf12bba71c1c5b79222bd7450.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-d2e6779836cd4aab5cf53d42170b7bf9.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-F9QK4C80G"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-F9QK4C80G', { 'anonymize_ip': true});
</script>
<style>html{ scroll-behavior: smooth; }</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Kundan Kumar</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about_me.html"> <i class="bi bi-person-circle" role="img">
</i> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../cv.html"> <i class="bi bi-file-earmark-text-fill" role="img">
</i> 
<span class="menu-text">CV</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../rpkg/research.html"> <i class="bi bi-lightbulb-fill" role="img">
</i> 
<span class="menu-text">Research</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-projects--notes" role="link" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-puzzle-fill" role="img">
</i> 
 <span class="menu-text">Projects &amp; Notes</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-projects--notes">    
        <li>
    <a class="dropdown-item" href="../../projects.html">
 <span class="dropdown-text">✨ All Projects</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../../drl.html">
 <span class="dropdown-text">Deep Reinforcement Learning</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../llms.html">
 <span class="dropdown-text">Computer Vision &amp; LLMs</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../robo.html">
 <span class="dropdown-text">Robotics</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">📚 Notes</li>
        <li>
    <a class="dropdown-item" href="https://kundan-kumarr.github.io/Zero2LLM-Crafter/">
 <span class="dropdown-text">Large Language Models</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://kundan-kumarr.github.io/ai-analysis/">
 <span class="dropdown-text">Deep &amp; Machine Learning</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://kundan-kumarr.github.io/statsphere/">
 <span class="dropdown-text">Statistics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://kundan-kumarr.github.io/SmartGridAI/">
 <span class="dropdown-text">AI for Smart Grids</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://kundan-kumarr.github.io/safe-AI/">
 <span class="dropdown-text">AI Security</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://kundan-kumarr.github.io/ResearchScientist-Handbook/">
 <span class="dropdown-text">ResearchScientist-Handbook</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../teaching/teaching.html"> <i class="bi bi-mortarboard-fill" role="img">
</i> 
<span class="menu-text">Teaching</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog/index.html"> <i class="bi bi-pen-fill" role="img">
</i> 
<span class="menu-text">Blogs</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#mathematical-foundations" id="toc-mathematical-foundations" class="nav-link active" data-scroll-target="#mathematical-foundations">Mathematical Foundations</a>
  <ul class="collapse">
  <li><a href="#step-1-compute-attention-scores" id="toc-step-1-compute-attention-scores" class="nav-link" data-scroll-target="#step-1-compute-attention-scores">Step 1 — Compute Attention Scores</a></li>
  <li><a href="#step-2-apply-softmax" id="toc-step-2-apply-softmax" class="nav-link" data-scroll-target="#step-2-apply-softmax">Step 2 — Apply Softmax</a></li>
  <li><a href="#step-3-weighted-sum-of-values" id="toc-step-3-weighted-sum-of-values" class="nav-link" data-scroll-target="#step-3-weighted-sum-of-values">Step 3 — Weighted Sum of Values</a></li>
  </ul></li>
  <li><a href="#complete-equation" id="toc-complete-equation" class="nav-link" data-scroll-target="#complete-equation">Complete Equation</a></li>
  <li><a href="#clinical-reporting" id="toc-clinical-reporting" class="nav-link" data-scroll-target="#clinical-reporting">Clinical Reporting</a></li>
  <li><a href="#open-sourcing-public-health" id="toc-open-sourcing-public-health" class="nav-link" data-scroll-target="#open-sourcing-public-health">Open Sourcing Public Health</a></li>
  <li><a href="#embrace-the-transition" id="toc-embrace-the-transition" class="nav-link" data-scroll-target="#embrace-the-transition">Embrace the transition</a></li>
  </ul>
<div class="toc-actions"><ul class="collapse"><li><a href="https://github.com/kundan-kumarr/kundan-kumarr.github.io/edit/main/blog/blog_20251020_self_attention_mechanism/index.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/kundan-kumarr/kundan-kumarr.github.io/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Self-Attention Mechanism</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Deep Learning</div>
    <div class="quarto-category">NLP</div>
    <div class="quarto-category">Transformers</div>
  </div>
  </div>

<div>
  <div class="description">
    <p>My thoughts on the open source transition in pharma, public (health) sector and academia. A culture change is needed, and it’s done better at some places than others. As educators and researchers, there are many things that can be done.</p>
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Kundan Kumar </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 21, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>Two days ago (Jan 11 2023) I watched a <a href="https://www.youtube.com/watch?v=nqJsLSLd39A">presentation</a> by data scientists at Roche about <strong>why they are making their clinical trials in 2023 open source with R</strong>. As someone who uses R for most of the time and has done similar works (not in pharma, but in <a href="https://chizapoth.github.io/projects/sykdomspulsen/">public health surveillance and reporting</a>: watch <a href="https://www.youtube.com/watch?v=9wmajA7Okrg">my talk</a>, <a href="https://github.com/chizapoth/talks/tree/master/2022-06-16-user_sykdomspulsen" class="btn btn-success btn-sm">Code</a> to find out what we do), I watched the presentation with great interest. Here are my notes, combined with some thoughts on open-source in the industry, public sector and academia.</p>
<section id="introduction" class="level4">
<h4 class="anchored" data-anchor-id="introduction">Introduction</h4>
<p>Self-attention is the <strong>core mathematical engine</strong> behind Transformers — the architecture that powers models like BERT, GPT, and Vision Transformers.<br>
It enables the model to dynamically focus on <strong>different parts of the input sequence</strong> to build contextual representations.</p>
<p>Unlike traditional recurrent models (RNNs/LSTMs) that process sequences step-by-step, self-attention processes all tokens <strong>in parallel</strong>, capturing <strong>global dependencies</strong> efficiently.</p>
</section>
<section id="mathematical-foundations" class="level1">
<h1>Mathematical Foundations</h1>
<p>Let the input be a matrix ( X ^{n d_{}} ),<br>
where ( n ) is the sequence length and ( d_{} ) is the embedding dimension.</p>
<p>From this input, we derive <strong>three key matrices</strong> using learnable weight parameters:</p>
<p>[ Q = X W_Q, K = X W_K, V = X W_V ]</p>
<p>where</p>
<ul>
<li>( W_Q, W_K, W_V ^{d_{} d_k} )</li>
<li>( Q ): Query matrix — “What am I looking for?”</li>
<li>( K ): Key matrix — “What information do I have?”</li>
<li>( V ): Value matrix — “What value should be returned if relevant?”</li>
</ul>
<hr>
<section id="step-1-compute-attention-scores" class="level2">
<h2 class="anchored" data-anchor-id="step-1-compute-attention-scores">Step 1 — Compute Attention Scores</h2>
<p>The similarity between a query and all keys is computed via the <strong>dot product</strong>:</p>
<p>[ = Q K^ ]</p>
<p>Each element ( s_{ij} ) represents <strong>how much token ( i )</strong> attends to <strong>token ( j )</strong>.</p>
<p>To stabilize gradients, the scores are <strong>scaled</strong> by ( ):</p>
<p>[ = ]</p>
<hr>
</section>
<section id="step-2-apply-softmax" class="level2">
<h2 class="anchored" data-anchor-id="step-2-apply-softmax">Step 2 — Apply Softmax</h2>
<p>We convert scores into <strong>probabilities</strong>:</p>
<p>[ A = ( ) ]</p>
<p>Here, each row of ( A ) sums to 1 — it represents the <strong>attention distribution</strong> for one token.</p>
<hr>
</section>
<section id="step-3-weighted-sum-of-values" class="level2">
<h2 class="anchored" data-anchor-id="step-3-weighted-sum-of-values">Step 3 — Weighted Sum of Values</h2>
<p>Finally, we multiply the attention weights ( A ) by the value matrix ( V ):</p>
<p>[ = A V ]</p>
<p>This produces the contextualized representation for each token — a weighted combination of all token values.</p>
<hr>
</section>
</section>
<section id="complete-equation" class="level1">
<h1>Complete Equation</h1>
<p>The <strong>scaled dot-product self-attention</strong> is thus summarized as:</p>
<p>[ (Q, K, V) = ( ) V ]</p>
<table class="caption-top table">
<colgroup>
<col style="width: 5%">
</colgroup>
<tbody>
<tr class="odd">
<td>- Note down some of the technology which points towards the future of the field - Relate to my experience of open-source applied in public health, specifically public health reporting - Share some thoughts in statistical education of applied students/researchers (e.g.&nbsp;medicine), and training Research Software Engineers</td>
</tr>
<tr class="even">
<td>#### My experience with statistical software</td>
</tr>
<tr class="odd">
<td>To put my opinions in perspective,</td>
</tr>
<tr class="even">
<td>- I <em>do not</em> have experience with SAS or pharma, so I <em>do not</em> have first-hand knowledge on the functionality, ease-of-use or the popularity of commercial softwares in the industry. - I did my MSc and PhD in statistics/biostatistics/medical informatics and R had always been a default choice. - I worked in <strong>public health</strong> for a few years, where <strong>Excel</strong> is possibly the most common tool, and STATA and R are scarcely used (statisticians, epidemiologists, bioinformaticians). - In the past few years, my <strong>university</strong> has made the switch from SPSS to STATA for intro statistics for medical students (while students at higher level, or doing advanced analyses might use R/python), and a test-run with R might be in motion.</td>
</tr>
</tbody>
</table>
</section>
<section id="clinical-reporting" class="level1">
<h1>Clinical Reporting</h1>
<p>In drug development at pharmaceutical companies (and/or research institutes and hospitals), these data related tasks are very common:</p>
<ul>
<li>summarise safety and efficacy data</li>
<li>provide accurate picture of trial outcomes</li>
<li>manage data collection across different sites</li>
</ul>
<p>Completing these tasks in a <strong>correct, efficient and reproducible</strong> manner is crucial for patient safety. However, these tasks are also <strong>highly resource intensive</strong>: highly trained scientist, statisticians and technincians must be involved in the process. Historically, pharma use <strong>commercial software</strong> such as SAS.</p>
<section id="regulation-and-exploration-needs" class="level3">
<h3 class="anchored" data-anchor-id="regulation-and-exploration-needs">Regulation and exploration needs</h3>
<p>There are requirements for clinical reporting: both regulartory and exploratory. From the regulatory side, there exist industry standards (<a href="https://www.cdisc.org/standards">CDISC</a>) in the clinical research process, such as SDTM (Model for Tabulation of Study Data) and ADaM (Analysis Data Model). Statistical analyses, tables, listings and graphs (TLGs) also fall into this cateogory.</p>
<p>From the exploratory side, clinical data are highly context dependent, and new formats of data such as imaging are more and more used in prediction modeling and drug development.</p>
<p>In addition, it is not hard to imagine that the technical competency of employees differ, especially in large organizations. Enabling people with less experience to analyse trial data in a reproducible manner is helpful for not only the learning and growth of employees, but also the productivity of organizations.</p>
<p>The existing commercial tools are not able to adapt to the rapid changes in the field.</p>
</section>
<section id="transition-into-open-source" class="level3">
<h3 class="anchored" data-anchor-id="transition-into-open-source">Transition into Open-Source</h3>
<p>In this talk, <a href="https://www.linkedin.com/in/kieran-martin-2b298742/">Dr Kieran Martin</a> at Roche introduced that they started using R as their core data science tool, aiming to move their codebase to having a core R. In the future, they plan to have something that is <strong>lanugage agnostic</strong>: meaning that python, Stan, C++, Julia and beyond can be used for different tasks.</p>
<p>I only noted down a few of the things they mentioned on the infrastructure side:</p>
<ul>
<li>OCEAN - a lanugage agnostic computing platform on AWS (docker)</li>
<li>Git, Gitlab for version control and collaboration</li>
<li>Rstudio connect server</li>
<li>Snakemake for orchestrate production</li>
</ul>
</section>
<section id="r-and-shiny" class="level3">
<h3 class="anchored" data-anchor-id="r-and-shiny">R and Shiny</h3>
<p>There are obvious benefits of using R. It is <strong>convenient</strong> to install and use (if you used python and R, you’d probably agree), and the latest development in <strong>Shiny</strong> made it very easy to develop interactive visualizations, suitable for exploration. <strong>Package</strong> development is critical for reproducibility and distributing works - which R does it very well. A few packages developed by pharma are <a href="https://github.com/insightsengineering/teal" class="btn btn-success btn-sm">Code</a> and <a href="https://pharmaverse.github.io/admiral/">admiral: the ADaM in R</a>, which I intend to check out at one point.</p>
<p>R has deep roots in academia which means the <strong>newest statistical methods</strong> are well covered; which also affects the skill sets that <strong>talents</strong> own - fresh graduates probably already learned it at university. R being open source means that <strong>collaboration</strong> with external partners is much more efficient, and transparent. Strong <strong>community support</strong> is another positive thing that encourages beginners to enter the field and learn.</p>
<hr>
</section>
</section>
<section id="open-sourcing-public-health" class="level1">
<h1>Open Sourcing Public Health</h1>
<section id="surveillance-and-reporting" class="level3">
<h3 class="anchored" data-anchor-id="surveillance-and-reporting">Surveillance and reporting</h3>
<p>One key functionality of public health (PH) authorities is <strong>stay informed and inform</strong>. They collect data from labs, hospitals and clinics across the country, summarize into useful statistics in tables and graphs, make reports, then inform the policy makers to make decisions (such as vaccination campaigns).</p>
<p>Compared to clinical reporting (in my understanding), there are many similarities - we make TLG (tables, listings and graphs). There are also features that make reporting in public health unique:</p>
<ul>
<li>PH surveillance and reporting are <strong>dynamic and real-time</strong>, which can change in a matter of days. That is because the situation of different infectious diseases can evolve rapidly, so PH authorities need to make appropriate adjustments.</li>
<li><strong>Time and location</strong> (spatial-temporal) are important. Different time granularity (daily, weekly) and geographical units (nation, county, municipality, city districts) are typically required for reporting.</li>
</ul>
</section>
<section id="scale-up-and-automate-with-open-source-tools" class="level3">
<h3 class="anchored" data-anchor-id="scale-up-and-automate-with-open-source-tools">Scale up and automate with open source tools</h3>
<p>Traditionally, these reports are made manually - one location, one graph per time on a certain disease. When a global pandemic hits, this is definitely not fast enough. At my team (<a href="https://docs.sykdomspulsen.no">Sykdomspulsen</a> team at the Norwegian Institute of Public Health), we tried a different approach. Details of what we did can be found in <a href="https://www.youtube.com/watch?v=9wmajA7Okrg">this talk</a>(<a href="https://github.com/chizapoth/talks/tree/master/2022-06-16-user_sykdomspulsen" class="btn btn-success btn-sm">Code</a>), but to make it brief:</p>
<ul>
<li>We developed a fully automated pipeline that connects 15 registries (vaccination, lab, hospital and intensive care and many more). The data is gathered, censored, cleaned and pre-processed for down-stream analysis</li>
<li>Statistical analysis, tables, graphs and maps are made for <u>all locations in Norway</u> for various outcomes of interest, such as Covid, influenza, respiratory and gastrointestinal infections</li>
<li>Over 1000 <strong>customized reports</strong> with over 30 graphs and tables are produced daily and sent to local PH officials, where we also had a <strong>shiny website</strong> (Kommunehelsetjenester for Kommunelege) for over 300 PH officials to get most up-to-date information about their own municipality</li>
</ul>
<p>By automation, every year Sykdomspulsen can save 700 000 NOK (roughly 70k USD) while making 400 times more real-time reports for public health. Even better, with reproducibility and quality control.</p>
</section>
<section id="toolbox" class="level3">
<h3 class="anchored" data-anchor-id="toolbox">Toolbox</h3>
<p>Sykdomspulsen is a small team (8 people, 3 are statisticians and 1 engineer), and our infrastructure was built upon R packages, which we call <a href="https://docs.sykdomspulsen.no/packages.html">splverse</a>. Our infrastructure is not fundamentally different from the one Roche introduced, basically:</p>
<ul>
<li>R does the task planning and project organization. On top of this, the data cleaning, statistical analysis are implemented. Graphs, tables and maps are made with appropriate R packages</li>
<li><strong>Rmarkdown</strong> does automated reporting into <code>.docx</code> and <code>.xlsx</code>. Some reports are also in <code>.html</code> tables to be embedded into customized emails</li>
<li><strong>Rstudio Workbench</strong> and <strong>GitHub</strong> help with teamwork<br>
</li>
<li><strong>Docker, GoCD</strong> and <strong>Airflow</strong> do the CI/CD and orchestration</li>
</ul>
</section>
</section>
<section id="embrace-the-transition" class="level1">
<h1>Embrace the transition</h1>
<section id="culture-change-needed" class="level3">
<h3 class="anchored" data-anchor-id="culture-change-needed">Culture change needed</h3>
<p>Unfortunately, not all organizations are eager to abandon the old way. Even at our own institute where researchers are the majority, open source and modern day programming is <em>hardly practiced</em> (by my observation). Even worse, under the budget cuts in 2023-24, a large number of younger employees who have the technical skills have left - which left the public health surveillance even more vulnerable now that Covid is far from over.</p>
<p>In my opinion, public health needs open-source and good programming even more than pharmaceutical companies. Both save lifes - and <strong>PH has less money</strong> to invest in softwares, infrastructures and talents. In this situation, resources should be spent in fields that are critical and most cost-effective; yet in reality this is often <a href="https://www.dagensmedisin.no/artikler/2022/11/14/fhis-tjeneste-sykdomspulsen-legges-ned/">not the case</a>.</p>
<p>The slow culture change at big organizations can happen, but only if there is a sufficient amount of employees who are willing to embrace the new technology. In the talk by Roche they about about their training strategy. It is not possible to train all users, and not everyone has the same needs at the same time. Therefore, self study with certain study paths is encouraged and supported.</p>
</section>
<section id="teach-programming-to-students-in-various-fields" class="level3">
<h3 class="anchored" data-anchor-id="teach-programming-to-students-in-various-fields">Teach programming to students in various fields</h3>
<p>Based on my experience in the UK and Norway, students (myself included) learn R programming in one of the two ways</p>
<ul>
<li><strong>Learning by Googling</strong> (self-taught): a university degree needs to use it: provides a short introduction, then students learn by using. This is how I learned R at my MSc Statistics degree, and this is probably the most common way</li>
<li>Workshops at university: organizations such as the <strong>Carpentries</strong> provide course material and teaching a few times per year, where interested students (usually from subjects such as biology) come and learn. These classes are quite popular, and usually have a long waiting list.</li>
</ul>
<p>From learning by googling to some organized teaching - that is already some good progress. However, if not, can we improve?</p>
<p>In my experience with statistical advising with the university hospital, clinical researchers and medical students are enthusastic to get their statistics done, some are also eager to do some analysis themselves. That is good. Yet, there is generally lack of capacity - either knowledge or software skills. Once the statistician who helps with the project stops, the project ends. There is the need to have <strong>in-house statistical capacity</strong>. To this end, <strong>open-source softwares such as R</strong>, and <strong>good programming practice</strong> (reproducibility for example) can help a lot: the license doesn’t end, and everything is documented so that the next person can continue the work.</p>
<p>I’m glad that my university has made some transitional efforts in this regard: STATA instead of SPSS is being taught to medical students as part of their statistics course. There might be a test-run in R soon, which is very exciting (since I’ll be involved in the teaching)!</p>
</section>
<section id="statistical-engineering-and-rses" class="level3">
<h3 class="anchored" data-anchor-id="statistical-engineering-and-rses">Statistical engineering and RSEs</h3>
<p>That was the capacity building to <strong>get beginners more independent</strong>. On the other side, there is also the need for better programming practice for researchers at more advanced level. Research Software Engineering (RSE) is starting to get more and more attention, because it is not only relevant for research (i.e.&nbsp;getting papers published), but in broader applications.</p>
<p>For example, in the talk by Roche, they mentioned that “RSE teams need to accelerate adoption of new statistical methods and biomarker data analysis”, and the implementation with R packages and templates is at its core. In the future more languages would be included such as Python, Stan, C++ and Julia.</p>
<p>However, RSE as a job title or career path is still a new thing. I know two RSEs at my university, and RSE is definitely <strong>not your typical academic faculty position</strong>: only departments that think it’s important makes positions, often not permanent. To get any new methods actually used in either industry or the public sector outside research, translating methods into tools is must-do. In the future I hope RSE becomes a stable and common career path, and more exciting things can happen.</p>
<blockquote class="blockquote">
<p>Interview Questions</p>
</blockquote>
<p><span class="blue-text">Implement the self-attention mechanism, which allows a model to dynamically focus on different parts of the input sequence when generating a contextualized representation. The function should return the self-attention output as a numpy array.</span></p>



</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/kundan-kumarr\.github\.io");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>© 2025 Kundan Kumar ∙ Made with <a href="https://quarto.org" target="_blank">Quarto</a></p>
</div>   
    <div class="nav-footer-center">
<p><a class="link-dark me-2" href="https://linkedin.com/in/kundan-kumarr" title="LinkedIn" target="_blank" rel="noopener"><i class="fab fa-linkedin"></i></a> <a class="link-dark me-2" href="https://github.com/kundan-kumarr" title="GitHub" target="_blank" rel="noopener"><i class="fab fa-github"></i></a> <a class="link-dark me-2" href="https://orcid.org/0000-0002-3229-6649" title="ORCID" target="_blank" rel="noopener"><i class="ai ai-orcid"></i></a> <a class="link-dark me-2" href="https://scholar.google.com/citations?user=1zDpIJkAAAAJ" title="Google Scholar" target="_blank" rel="noopener"><i class="ai ai-google-scholar"></i></a> <a class="link-dark me-2" href="mailto:cs.kundann@gmail.com" title="Email" target="_blank" rel="noopener"><i class="fas fa-envelope"></i></a></p>
<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/kundan-kumarr/kundan-kumarr.github.io/edit/main/blog/blog_20251020_self_attention_mechanism/index.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/kundan-kumarr/kundan-kumarr.github.io/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="../../contact.html">
<p>Contact</p>
</a>
  </li>  
</ul>
    </div>
  </div>
</footer>




<script src="../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>